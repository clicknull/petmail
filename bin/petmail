#!/usr/bin/env python

# This bin/petmail exists for developer's convenience. Once you run "setup.py
# safe_develop", it lets you run ./bin/petmail from inside the source tree,
# and gives you a safe local workspace (hashes of dependency tarballs are
# checked, and source code changes are immediately available without a
# rebuild).

import sys, os

# this 'petmail' script is in bin/petmail, below the source tree's root
# directory
me = os.path.abspath(os.path.realpath(sys.argv[0]))
root = os.path.dirname(os.path.dirname(me))
venv_root = os.path.join(root, "venv")
real_petmail = os.path.join(venv_root, "bin", "petmail")

if not os.path.exists(real_petmail):
    print ("No virtualenv detected (no executable in venv/bin/petmail).\n"
           "Please run 'python setup.py safe_develop' first.\n")
    sys.exit(1)

os.execv(real_petmail, [real_petmail])
