#!/usr/bin/env python

import sys, os

# this 'petmail' script is in bin/petmail, below the source tree's root
# directory
me = os.path.abspath(os.path.realpath(sys.argv[0]))
root = os.path.dirname(os.path.dirname(me))
venv_root = os.path.join(root, "venv")
real_petmail = os.path.join(venv_root, "bin", "petmail")

print os.getcwd()
if not os.path.exists(real_petmail):
    print ("No virtualenv detected (no executable in venv/bin/petmail).\n"
           "Please run 'python setup.py safe_install' first.\n")
    sys.exit(1)

os.execv(real_petmail, [real_petmail])
